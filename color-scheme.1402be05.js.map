{"version":3,"sources":["js/color-scheme.js"],"names":["lightStyles","document","querySelectorAll","darkStyles","darkSchemeMedia","matchMedia","switcherRadios","setupSwitcher","savedScheme","getSavedScheme","querySelector","checked","forEach","radio","addEventListener","event","setScheme","target","value","setupScheme","systemScheme","getSystemScheme","scheme","switchMedia","clearScheme","saveScheme","lightMedia","darkMedia","link","media","darkScheme","matches","localStorage","getItem","setItem","removeItem"],"mappings":";AAAA,MAAMA,EAAcC,SAASC,iBAC3B,mEAEIC,EAAaF,SAASC,iBAC1B,kEAEIE,EAAkBC,WAAW,gCAC7BC,EAAiBL,SAASC,iBAAiB,oBAEjD,SAASK,IACDC,MAAAA,EAAcC,IAEhBD,GAAgB,OAAhBA,EAAsB,CACHP,SAASS,wCAAwCF,MACzDG,SAAU,EAExB,IAAGL,GAAgBM,QAAQC,IAC1BA,EAAMC,iBAAiB,SAAUC,IAC/BC,EAAUD,EAAME,OAAOC,WAK7B,SAASC,IACDX,MAAAA,EAAcC,IACdW,EAAeC,IAED,OAAhBb,GAEAA,IAAgBY,GAClBJ,EAAUR,GAId,SAASQ,EAAUM,GACjBC,EAAYD,GAEG,SAAXA,EACFE,IAEAC,EAAWH,GAIf,SAASC,EAAYD,GACfI,IAAAA,EACAC,EAEW,SAAXL,GACFI,EAAa,gCACbC,EAAY,iCAEZD,EAAwB,UAAXJ,EAAqB,MAAQ,UAC1CK,EAAuB,SAAXL,EAAoB,MAAQ,WAEzC,IAAGtB,GAAaY,QAAQgB,IACvBA,EAAKC,MAAQH,IAEd,IAAGvB,GAAYS,QAAQgB,IACtBA,EAAKC,MAAQF,IAIjB,SAASN,IAGAS,OAFY1B,EAAgB2B,QAEf,OAAS,QAG/B,SAAStB,IACAuB,OAAAA,aAAaC,QAAQ,gBAG9B,SAASR,EAAWH,GAClBU,aAAaE,QAAQ,eAAgBZ,GAGvC,SAASE,IACPQ,aAAaG,WAAW,gBAG1B5B,IACAY","file":"color-scheme.1402be05.js","sourceRoot":"../src","sourcesContent":["const lightStyles = document.querySelectorAll(\n  'link[rel=stylesheet][media*=prefers-color-scheme][media*=light]',\n);\nconst darkStyles = document.querySelectorAll(\n  'link[rel=stylesheet][media*=prefers-color-scheme][media*=dark]',\n);\nconst darkSchemeMedia = matchMedia('(prefers-color-scheme: dark)');\nconst switcherRadios = document.querySelectorAll('.switcher__radio');\n\nfunction setupSwitcher() {\n  const savedScheme = getSavedScheme();\n\n  if (savedScheme !== null) {\n    const currentRadio = document.querySelector(`.switcher__radio[value=${savedScheme}]`);\n    currentRadio.checked = true;\n  }\n  [...switcherRadios].forEach(radio => {\n    radio.addEventListener('change', event => {\n      setScheme(event.target.value);\n    });\n  });\n}\n\nfunction setupScheme() {\n  const savedScheme = getSavedScheme();\n  const systemScheme = getSystemScheme();\n\n  if (savedScheme === null) return;\n\n  if (savedScheme !== systemScheme) {\n    setScheme(savedScheme);\n  }\n}\n\nfunction setScheme(scheme) {\n  switchMedia(scheme);\n\n  if (scheme === 'auto') {\n    clearScheme();\n  } else {\n    saveScheme(scheme);\n  }\n}\n\nfunction switchMedia(scheme) {\n  let lightMedia;\n  let darkMedia;\n\n  if (scheme === 'auto') {\n    lightMedia = '(prefers-color-scheme: light)';\n    darkMedia = '(prefers-color-scheme: dark)';\n  } else {\n    lightMedia = scheme === 'light' ? 'all' : 'not all';\n    darkMedia = scheme === 'dark' ? 'all' : 'not all';\n  }\n  [...lightStyles].forEach(link => {\n    link.media = lightMedia;\n  });\n  [...darkStyles].forEach(link => {\n    link.media = darkMedia;\n  });\n}\n\nfunction getSystemScheme() {\n  const darkScheme = darkSchemeMedia.matches;\n\n  return darkScheme ? 'dark' : 'light';\n}\n\nfunction getSavedScheme() {\n  return localStorage.getItem('color-scheme');\n}\n\nfunction saveScheme(scheme) {\n  localStorage.setItem('color-scheme', scheme);\n}\n\nfunction clearScheme() {\n  localStorage.removeItem('color-scheme');\n}\n\nsetupSwitcher();\nsetupScheme();\n"]}