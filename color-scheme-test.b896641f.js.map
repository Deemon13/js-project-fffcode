{"version":3,"sources":["../color-scheme-test.js"],"names":["lightStyles","document","querySelectorAll","darkStyles","darkSchemeMedia","matchMedia","switcherRadios","setupSwitcher","savedScheme","getSavedScheme","querySelector","checked","forEach","radio","addEventListener","event","setScheme","target","value","setupScheme","systemScheme","getSystemScheme","scheme","switchMedia","clearScheme","saveScheme","lightMedia","darkMedia","link","media","darkScheme","matches","localStorage","getItem","setItem","removeItem"],"mappings":";AAAA,MAAMA,EAAcC,SAASC,iBAAiB,qEACxCC,EAAaF,SAASC,iBAAiB,oEACvCE,EAAkBC,WAAW,gCAC7BC,EAAiBL,SAASC,iBAAiB,oBAEjD,SAASK,IACCC,MAAAA,EAAcC,IAEhBD,GAAgB,OAAhBA,EAAsB,CACDP,SAASS,wCAAwCF,MACzDG,SAAU,EAG1B,IAAGL,GAAgBM,QAASC,IACzBA,EAAMC,iBAAiB,SAAWC,IAC9BC,EAAUD,EAAME,OAAOC,WAKnC,SAASC,IACCX,MAAAA,EAAcC,IACdW,EAAeC,IAED,OAAhBb,GAEAA,IAAgBY,GAChBJ,EAAUR,GAIlB,SAASQ,EAAUM,GACfC,EAAYD,GAEG,SAAXA,EACAE,IAEAC,EAAWH,GAInB,SAASC,EAAYD,GACbI,IAAAA,EACAC,EAEW,SAAXL,GACAI,EAAa,gCACbC,EAAY,iCAEZD,EAAyB,UAAXJ,EAAsB,MAAQ,UAC5CK,EAAwB,SAAXL,EAAqB,MAAQ,WAG7C,IAAGtB,GAAaY,QAASgB,IACtBA,EAAKC,MAAQH,IAEhB,IAAGvB,GAAYS,QAASgB,IACrBA,EAAKC,MAAQF,IAKrB,SAASN,IAGES,OAFY1B,EAAgB2B,QAEf,OAAS,QAGjC,SAAStB,IACEuB,OAAAA,aAAaC,QAAQ,gBAGhC,SAASR,EAAWH,GAChBU,aAAaE,QAAQ,eAAgBZ,GAGzC,SAASE,IACLQ,aAAaG,WAAW,gBAG5B5B,IACAY","file":"color-scheme-test.b896641f.js","sourceRoot":"../src","sourcesContent":["const lightStyles = document.querySelectorAll(\"link[rel=stylesheet] [media*=prefers-color-scheme] [media*=light]\");\nconst darkStyles = document.querySelectorAll(\"link [rel=stylesheet][media*=prefers-color-scheme] [media*=dark]\");\nconst darkSchemeMedia = matchMedia(\"(prefers-color-scheme: dark)\");\nconst switcherRadios = document.querySelectorAll(\".switcher__radio\");\n\nfunction setupSwitcher() {\n    const savedScheme = getSavedScheme();\n\n    if (savedScheme !== null) {\n        const currentRadio = document.querySelector(`.switcher__radio[value=${savedScheme}]`);\n        currentRadio.checked = true;\n    }\n\n    [...switcherRadios].forEach((radio) => {\n        radio.addEventListener(\"change\", (event) => {\n            setScheme(event.target.value);\n        });\n    });\n}\n\nfunction setupScheme() {\n    const savedScheme = getSavedScheme();\n    const systemScheme = getSystemScheme();\n\n    if (savedScheme === null) return;\n\n    if (savedScheme !== systemScheme) {\n        setScheme(savedScheme);\n    }\n}\n\nfunction setScheme(scheme) {\n    switchMedia(scheme);\n\n    if (scheme === \"auto\") {\n        clearScheme();\n    } else {\n        saveScheme(scheme);\n    }\n}\n\nfunction switchMedia(scheme) {\n    let lightMedia;\n    let darkMedia;\n    \n    if (scheme === \"auto\") {\n        lightMedia = \"(prefers-color-scheme: light)\";\n        darkMedia = \"(prefers-color-scheme: dark)\";\n    } else {\n        lightMedia = (scheme === \"light\") ? \"all\" : \"not all\";\n        darkMedia = (scheme === \"dark\") ? \"all\" : \"not all\";\n    }\n    \n    [...lightStyles].forEach((link) => {\n        link.media = lightMedia;\n    });\n    [...darkStyles].forEach((link) => {\n        link.media = darkMedia;\n    });\n\n};\n\nfunction getSystemScheme() {\n    const darkScheme = darkSchemeMedia.matches;\n\n    return darkScheme ? \"dark\" : \"light\";\n};\n\nfunction getSavedScheme() {\n    return localStorage.getItem(\"color-scheme\");\n};\n\nfunction saveScheme(scheme) {\n    localStorage.setItem(\"color-scheme\", scheme);\n}\n\nfunction clearScheme() {\n    localStorage.removeItem(\"color-scheme\");\n}\n\nsetupSwitcher();\nsetupScheme();\n"]}